var baxiaCommon=function(){"use strict";var e=function(e,t){return!!e&&e.indexOf(t)>-1},t=function(t){void 0===t&&(t="");var n={valid:!1,type:""};"object"==typeof t&&(t=JSON.stringify(t)),t=t.toLocaleUpperCase();var r=e(t,"RGV587"),a=!r&&e(t,"assist_flag")&&e(t,"URL"),o=!a&&e(t,"_flag_")&&e(t,"URL");return r||a||o?n:(n.valid=!0,n)},n=location,r=document,a=function(e,t,a){(void 0===t&&(t=1),void 0===a&&(a=1),0>=a||Math.random()<a)&&function(e,t){var n=[];for(var r in e)n.push(r+"="+encodeURIComponent(e[r]));(new Image).src=t+n.join("&")}({code:t,msg:(e+"").substr(0,1e3)+";v:1.1.0",pid:"baxia",page:n.href.split(/[#?]/)[0],query:n.search.substr(1),hash:n.hash,referrer:r.referrer,title:r.title,ua:navigator.userAgent},"//gm.mmstat.com/fsp.1.1?")};function o(e){a(e,13,1)}var s,i=document,c=window,d=function(e,t){return t.result&&t.result.jsPath?t.result.jsPath:""+((c.__baxia__||{})["cdnPath"]||"https://g.alicdn.com/sd/baxia/1.1.1/")+e+".js"},u=[],h=function(e,t){void 0===e&&(e="Xhr"),void 0===t&&(t={});try{if(s)return s.handler(t);u.push({pluginName:e,props:t});var n=u[0],r="baxia"+n.pluginName+"Handler";!function(e,t,n){var r=i.getElementsByTagName("script")[0],o=i.createElement("script");if(o.async=!0,o.src=e,o.onerror=function(t){a("function:loadJS. msg:"+e+"load error。props："+JSON.stringify(n)),o.onerror=null},t){var s=!1;o.onload=o.onreadystatechange=function(){s||o.readyState&&!/loaded|complete/.test(o.readyState)||(o.onload=o.onreadystatechange=null,s=!0,t())}}r.parentNode.insertBefore(o,r)}(d(r,n.props),function(){if(!s){s=new window[r];for(var e=0;u.length>e;e++)s.handler(u[e].props);u=[]}})}catch(o){s=null,a("handler err，param:"+e+JSON.stringify(t)+","+o.message+o.stack)}},f=function(e){var t=e.done,n=window.fetch;n&&(window.fetch=function(){var e=arguments;return new Promise(function(r,a){var o=e[1]||{};o.credentials&&"omit"!==o.credentials||(o.credentials="same-origin"),n.apply(window,e).then(function(n){try{var s=n.headers.get("content-type");if(-1>=s.indexOf("json")&&-1>=s.indexOf("text"))return r(n)}catch(i){return r(n)}n.clone().text().then(function(s){return t?t({parent_config:o,parent_arguments:e,response:n,data:s,resolve:r,reject:a}):(r(n),s)})})["catch"](function(e){a(e)})})})};var l={main:function(){try{f({done:function(e){var n,r=e.response,a=e.data,o=e.resolve,s=e.reject,i=a.config||{};return i&&((i=e.parent_config).url=e.parent_arguments[0]),t(a).valid?((n=i.baxiaData&&i.baxiaData.defer)?n.resolve(r,r.status,r.headers,i):o(r),a):(n={resolve:o,reject:s},(i=Object.assign({},i)).baxiaData={defer:n,response:r},h("Fetch",{result:a,config:i}),n.promise)}})}catch(e){o("Hook Fetch 内部出错，Message:"+e.message)}}},v=function(e){return Array.prototype.slice.call(e)},p=function(){var e={test:"true"};try{return Object.defineProperty(e,"test",{enumerable:!1,value:e}),e.test==e.test}catch(t){return!1}}(),y=function(e,t,n){var r=e[t];e[t]=function(){var e=v(arguments);if(n&&!1===n.apply(this,e))return;return r.apply(this,e)}},g=XMLHttpRequest.prototype,m=null,_=function(e){var n,r,a,s,i=e.done;try{!function(e,t,n,r){var a=Object.getOwnPropertyDescriptor(e,t);if(!p||a){var s=a.set,i=a.get;p&&Object.defineProperty(e,t,{set:function(){var e=v(arguments);if(n){var t=n&&n.apply(this,e);e=t?[t]:e}s&&s.apply(this,e)},get:function(){var e=i&&i.apply(this);return r?r.call(this,e):e}})}else o("错误：不支持 hookProperty")}(g,"readyState",null,function(e){var n=e,r=this;this._onreadystatechange=this._onreadystatechange||this.onreadystatechange;var a=x(r);if(3!==n||t(a).valid){if(4===n&&"json"===r.responseType&&!t(a).valid)return void i({response:a,readyState:n,xhr:this,eventKey:"onreadystatechange"})}else this.onreadystatechange=function(e){var t=this;m=window.event||e||m,a=x(r),i({response:a,readyState:n,xhr:r,eventKey:"onreadystatechange",event:m},function(){t._onreadystatechange(m)})};return n})}catch(c){o("Hook XHR 错误,Message:"+c.message)}y(g,"send",function(){var e=this;this.sendParams=arguments,this._onload||(this._onload=this.onload),this.onload&&(this.onload=function(e){var t=this;m=window.event||e;var n=x(this);i({response:n,readyState:3,xhr:this,eventKey:"onload"},function(){t._onload&&t._onload(m)})}),!p&&function(e,t,n,r){if(void 0===r&&(r=!1),t.addEventListener)t.addEventListener(e,n,r);else if(t.attachEvent)t.attachEvent("on"+e,n)}("readystatechange",this,function(){var t=x(e);i({response:t,readyState:e.readyState,xhr:e,eventKey:"readystatechange"})})}),a=function(e){var t=e[1];return e[1]=function(e){var n=this,r=e.type;if("load"===r||"readystatechange"===r){var a=x(e.target);if(a)return void i({response:a,readyState:3,xhr:this,eventKey:r},function(){t.call(n,e)})}t.call(this,e)},e},s=(n=g)[r="addEventListener"],n[r]=function(){var e=v(arguments),t=a(e);return s.apply(this,t)},y(g,"setRequestHeader",function(e,t){this._header_=this._header_||{},this._header_[e]=t}),y(g,"open",function(){this.openParams=arguments})};function x(e){var t="";try{t=e.response||e.responseText}catch(n){t=""}return t}var w={version:"1.1.0",main:function(){try{_({done:function(e,n){var r=e.response,a=e.readyState,o=e.xhr,s=e.eventKey;r||(r=function(e){var t="";try{t=e.response||e.responseText}catch(n){t=""}return t}(o)),o._processing||(o._processing||3>a||t(r).valid?n&&n():(o._processing=!0,"onreadystatechange"===s&&(o.onload=o._onload),h("Xhr",{result:r,config:{xhr:o,url:o.responseURL,fail:function(){var e=o.onerror||o.onabort||o.ontimeout||n;e&&e()}}})))}})}catch(e){o("Hook XHR 内部出错，Message:"+e.message)}}};l.main(),w.main();var b={version:"1.1.0"};return a("i,c",11,.01),b}();
